(this["webpackJsonpold-school-filter"]=this["webpackJsonpold-school-filter"]||[]).push([[0],{152:function(e,t,n){e.exports=n.p+"static/media/default.88009c77.jpg"},176:function(e,t,n){e.exports=n(326)},319:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),c=n.n(l),o=n(27),i=n(335),u=n(336),s=n(337),d=n(332),m=n(333),f=n(330),v=n(334),x=n(113),h=n(328),g=n(31),p=n(151),y=n(248);var E=Object(a.forwardRef)((function(e,t){var n=Object(a.useContext)(A).rawImage,l=Object(a.useState)(null),c=Object(o.a)(l,2),i=c[0],u=c[1];return Object(a.useImperativeHandle)(t,(function(){return{download:function(){var e=i.captureAsDataURL("image/jpeg",.75);y.saveAs(e,"download.jpg")}}})),r.a.createElement(a.Fragment,null,r.a.createElement(p.Surface,{width:e.width,height:e.height,ref:function(e){return u(e)},webglContextAttributes:{preserveDrawingBuffer:!0},pixelRatio:e.pixelRatio},r.a.createElement(g.Node,{shader:e.shader,uniforms:{tex:n,iTime:1}})))})),b=n(152),j=n.n(b),w=n(327),O=n(67);function C(){var e=Object(O.a)(["\n        precision highp float;\n        uniform sampler2D tex;\n        varying vec2 uv;\n        \n        void main()\n        {\n            vec3 oricol = texture2D( tex, uv ).xyz;\n            vec3 col = texture2D( tex, uv ).rgb;\n            float oldx = col.x;\n            float oldy = col.y;\n            float add = abs(oldx - oldy)*0.5;\n            float stepxy = step(col.y, col.x);\n            float stepyx = 1.0 - stepxy;\n            col.x = stepxy * (oldx + add) + stepyx * (oldx - add);\n            col.y = stepyx * (oldy + add) + stepxy * (oldy - add);\n            col.z = sqrt(col.z);\n            col = mix(texture2D( tex, uv ).rgb, col, 1.0);\n            gl_FragColor = vec4(col, 1.0);\n        }\n    "]);return C=function(){return e},e}function D(){var e=Object(O.a)(["\n        precision highp float;\n        uniform sampler2D tex;\n        uniform float iTime;\n        varying vec2 uv;\n        \n        highp float rand(vec2 co)\n        {\n            highp float a = 12.9898;\n            highp float b = 78.233;\n            highp float c = 43758.5453;\n            highp float dt= dot(co.xy ,vec2(a,b));\n            highp float sn= mod(dt,3.14);\n            return fract(sin(sn) * c);\n        }\n      \n        void main()\n        {\n            highp float magnitude = 0.000008;\n        \n            // Set up offset\n            vec2 offsetRedUV = uv;\n            offsetRedUV.x = uv.x + rand(vec2(iTime*0.03,uv.y*0.42)) * 0.001;\n            offsetRedUV.x += sin(rand(vec2(iTime*0.2, uv.y)))*magnitude;\n            \n            vec2 offsetGreenUV = uv;\n            offsetGreenUV.x = uv.x + rand(vec2(iTime*0.004,uv.y*0.002)) * 0.004;\n            offsetGreenUV.x += sin(iTime*9.0)*magnitude;\n            \n            vec2 offsetBlueUV = uv;\n            offsetBlueUV.x = uv.y;\n            \n            // Load Texture\n            float r = texture2D(tex, offsetRedUV).r;\n            float g = texture2D(tex, offsetGreenUV).g;\n            float b = texture2D(tex, uv).b;\n            \n            gl_FragColor = vec4(r, g, b, 1.0);\n        }\n    "]);return D=function(){return e},e}function R(){var e=Object(O.a)(["\n          precision highp float;\n          uniform sampler2D tex;\n          uniform float iTime;\n          varying vec2 uv;\n  \n          void main()\n          {\n              vec3 oricol = texture2D( tex, uv ).xyz;\n              vec3 col;\n              float x =  sin(0.3*iTime+uv.y*21.0)*sin(0.7*iTime+uv.y*29.0)*sin(0.3+0.33*iTime+uv.y*31.0)*0.0017;\n  \n              col.r = texture2D(tex,vec2(x+uv.x+0.001,uv.y+0.001)).x+0.05;\n              col.g = texture2D(tex,vec2(x+uv.x+0.000,uv.y-0.002)).y+0.05;\n              col.b = texture2D(tex,vec2(x+uv.x-0.002,uv.y+0.000)).z+0.05;\n              col.r += 0.08*texture2D(tex,0.75*vec2(x+0.025, -0.027)+vec2(uv.x+0.001,uv.y+0.001)).x;\n              col.g += 0.05*texture2D(tex,0.75*vec2(x+-0.022, -0.02)+vec2(uv.x+0.000,uv.y-0.002)).y;\n              col.b += 0.08*texture2D(tex,0.75*vec2(x+-0.02, -0.018)+vec2(uv.x-0.002,uv.y+0.000)).z;\n  \n              col = clamp(col*0.6+0.4*col*col*1.0,0.0,1.0);\n  \n              float vig = (0.0 + 1.0*16.0*uv.x*uv.y*(1.0-uv.x)*(1.0-uv.y));\n              col *= vec3(pow(vig,0.3));\n  \n              col *= vec3(0.95,1.05,0.95);\n              col *= 2.8;\n  \n              float scans = clamp( 0.35+0.35*sin(3.5*iTime+uv.y*gl_FragCoord.y/uv.y*1.5), 0.0, 1.0);\n              \n              float s = pow(scans,1.7);\n              col = col*vec3( 0.4+0.7*s) ;\n  \n              col *= 1.0+0.01*sin(110.0*iTime);\n              if (uv.x < 0.0 || uv.x > 1.0)\n                  col *= 0.0;\n              if (uv.y < 0.0 || uv.y > 1.0)\n                  col *= 0.0;\n              \n              col*=1.0-0.65*vec3(clamp((mod(gl_FragCoord.x, 2.0)-1.0)*2.0,0.0,1.0));\n              \n              float comp = smoothstep( 0.1, 0.9, sin(iTime) );\n  \n              gl_FragColor = vec4(col, 1.0);\n          }\n      "]);return R=function(){return e},e}function S(){var e=Object(O.a)(["\n          precision highp float;\n          uniform sampler2D tex;\n          varying vec2 uv;\n\n          void main()\n          {\n              vec3 col = texture2D( tex, uv ).xyz;\n              gl_FragColor = vec4(col, 1.0);\n          }\n      "]);return S=function(){return e},e}var k=g.Shaders.create({ORIGINAL:{frag:Object(g.GLSL)(S())},CRT:{frag:Object(g.GLSL)(R())},VHS:{frag:Object(g.GLSL)(D())},Cyberpunk:{frag:Object(g.GLSL)(C())}}),I=k.ORIGINAL,T=[{name:"CRT",reference:"MattiasCRT",link:"https://www.shadertoy.com/view/Ms23DR",shader:k.CRT},{name:"VHS",reference:"VHS Shader",link:"https://www.shadertoy.com/view/MsK3zw",shader:k.VHS},{name:"Cyberpunk",reference:null,link:null,shader:k.Cyberpunk}];function V(){var e=Object(a.useContext)(A),t=e.width,n=e.height,l=e.shaderIndex,c=e.setShaderIndex,i=Object(a.useState)(1),u=Object(o.a)(i,2),s=u[0],f=u[1];function v(e){c(e)}return Object(a.useEffect)((function(){f(Math.max(1,t/120,n/90))}),[t,n]),r.a.createElement(w.default.Group,{onChange:function(e){return v(e.target.value)},value:l},r.a.createElement(d.a,{justify:"center",align:"middle",gutter:32},T.map((function(e,a){return r.a.createElement(m.a,{key:a,onClick:function(){return v(a)}},r.a.createElement(d.a,{justify:"center"},r.a.createElement(E,{width:t/s,height:n/s,pixelRatio:s,shader:e.shader})),r.a.createElement(d.a,{justify:"center"},r.a.createElement(w.default,{value:a},e.name)))}))))}function F(){var e=Object(a.useContext)(A),t=e.rawImage,n=e.setRawImage,l=e.width,c=e.setWidth,g=e.height,p=e.setHeight,y=e.shaderIndex,b=Object(a.useState)(1),w=Object(o.a)(b,2),O=w[0],C=w[1],D=Object(a.useRef)();function R(e){var t=new Image;t.onload=function(){var a=Math.max(1,t.width/560,t.height/420);c(t.width),p(t.height),C(a),n(e)},t.src=e}function S(e){var t=new FileReader;return t.readAsDataURL(e),t.onload=function(e){R(e.target.result)},!1}function k(){n(null)}return Object(a.useEffect)((function(){R(j.a)}),[]),r.a.createElement(a.Fragment,null,t?r.a.createElement(a.Fragment,null,r.a.createElement(d.a,{justify:"center",gutter:32},r.a.createElement(m.a,null,r.a.createElement(E,{width:l/O,height:g/O,pixelRatio:O,shader:I,ref:D})),r.a.createElement(v.a,{content:r.a.createElement("p",null,"shader porting from",r.a.createElement(x.a,{type:"link",onClick:function(){return window.open(T[y].link)}},T[y].reference)),title:T[y].name,placement:"bottomRight",mouseEnterDelay:T[y].reference?.1:600},r.a.createElement(m.a,null,r.a.createElement(E,{width:l/O,height:g/O,pixelRatio:O,shader:T[y].shader,ref:D})))),r.a.createElement(d.a,{justify:"center",style:{padding:"20px 20px"}},r.a.createElement(V,null)),r.a.createElement(d.a,{justify:"center"},r.a.createElement(h.a,null,r.a.createElement(x.a,{onClick:k,type:"primary",shape:"round",size:"large",icon:r.a.createElement(u.a,null)},"Remove"),r.a.createElement(x.a,{onClick:function(){return D.current.download()},type:"primary",shape:"round",size:"large",icon:r.a.createElement(s.a,null)},"Download")))):r.a.createElement(d.a,{justify:"center",align:"middle"},r.a.createElement(m.a,{span:16},r.a.createElement(f.a.Dragger,{name:"file",multiple:!1,beforeUpload:S,height:500},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(i.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area"),r.a.createElement("p",{className:"ant-upload-hint"},"Your files won't be uploaded to any servers, they will only be used locally."),r.a.createElement("p",{className:"ant-upload-hint"},"Enjoy.")))))}n(319);var L=n(329),U=n(331),z=n(338),G=L.a.Header,H=L.a.Content,N=L.a.Footer,A=r.a.createContext({});var _=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(0),i=Object(o.a)(c,2),u=i[0],s=i[1],d=Object(a.useState)(0),m=Object(o.a)(d,2),f=m[0],v=m[1],x=Object(a.useState)(0),h=Object(o.a)(x,2),g=h[0],p=h[1];return r.a.createElement(A.Provider,{value:{rawImage:n,setRawImage:l,width:u,setWidth:s,height:f,setHeight:v,shaderIndex:g,setShaderIndex:p}},r.a.createElement("div",{className:"App"},r.a.createElement(L.a,{className:"layout"},r.a.createElement(G,null,r.a.createElement(U.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},r.a.createElement(U.a.Item,{key:"1",icon:r.a.createElement(z.a,null)},"Old School Filter"))),r.a.createElement(L.a,null,r.a.createElement(H,{style:{padding:"20px 0px",minHeight:document.documentElement.clientHeight-134}},r.a.createElement(F,null))),r.a.createElement(N,{style:{textAlign:"center"}},"Old School Filter \xa92020 Created by Wenduo Yue"))))};c.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.103dea8f.chunk.js.map